<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>ally.when.focusable - ally.js</title><link rel="canonical" href="https://allyjs.io/api/when/focusable.html">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../../assets/website.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/themes/prism.min.css" data-noprefix="">
</head>
<body>
  <a href="#main" class="skip-to-content">Skip to content</a>
  <header>
    <h1 id="logo">ally.js</h1>
    <p id="claim"><em>JavaScript</em> library to help modern <em>web applications</em> with <em>accessibility</em> concerns by <strong>making accessibility simpler</strong></p>
    <nav id="site-navigation">
      <input type="search" id="search-input" placeholder="Search the docs" aria-label="Search the docs">
      <ul>
          
            <li class="">
              <a href="../../index.html">Home</a>
            </li>
          
            <li class="">
              <a href="../../getting-started.html">Getting Started</a>
            </li>
          
            <li class="active">
              <a href="../index.html">API</a>
            </li>
          
            <li class="">
              <a href="../../tutorials/index.html">Tutorials</a>
            </li>
          
            <li class="">
              <a href="../../contributing/index.html">Contributing</a>
            </li>
              <li class="download"><a href="../../getting-started.html#downloading-the-umd-bundle">Download</a></li>
        <li class="github"><a href="https://github.com/medialize/ally.js">Github</a></li>
      </ul>
    </nav></header>
  <div id="wrapper">
    <div id="navigation-column">
        <nav id="table-of-contents"><h1>On this page</h1><ul>
        <li><a href="#description">Description</a></li>
        
        
        <li><a href="#usage">Usage</a></li>
        
        
        <li><a href="#callback-signature">Callback signature</a></li>
        
        
        <li><a href="#examples">Examples</a></li>
        
        
        <li><a href="#notes">Notes</a></li>
        
        
        <li><a href="#related-resources">Related resources</a></li>
        
        
        <li><a href="#contributing">Contributing</a></li>
        </ul></nav>
      <aside>
        <h1>Contribute to this page</h1>
        <ul id="collaboration-links">
          <li><a id="document-github-edit" href="https://github.com/medialize/ally.js/blob/master/docs/api/when/focusable.md">edit this page on github</a></li>
          <li><a id="document-github-issue" data-title="ally.when.focusable" href="https://github.com/medialize/ally.js/issues/new?title=[ally.when.focusable]%20_your_problem_summary_">file an issue</a></li>
          <li></li>
        
      </ul></aside>
      <aside>
        <nav id="collection-navigation">
        
          <h1>More in <em>API</em></h1><ul>
          <li class="">
            <a class="" href="../index.html">API index</a>
          </li>
          
          
          <li class="">
            <a class="" href="../concepts.html">API concepts</a>
          </li>
          
          
          <li class="">
            <a class="" href="../element/blur.html">ally.element.blur</a>
          </li>
          
          
          <li class="">
            <a class="" href="../element/disabled.html">ally.element.disabled</a>
          </li>
          
          
          <li class="">
            <a class="" href="../element/focus.html">ally.element.focus</a>
          </li>
          
          
          <li class="">
            <a class="" href="../event/active-element.html">ally.event.activeElement</a>
          </li>
          
          
          <li class="">
            <a class="" href="../event/shadow-focus.html">ally.event.shadowFocus</a>
          </li>
          
          
          <li class="">
            <a class="" href="../fix/pointer-focus-children.html">ally.fix.pointerFocusChildren</a>
          </li>
          
          
          <li class="">
            <a class="" href="../fix/pointer-focus-input.html">ally.fix.pointerFocusInput</a>
          </li>
          
          
          <li class="">
            <a class="" href="../fix/pointer-focus-parent.html">ally.fix.pointerFocusParent</a>
          </li>
          
          
          <li class="">
            <a class="" href="../get/active-element.html">ally.get.activeElement</a>
          </li>
          
          
          <li class="">
            <a class="" href="../get/active-elements.html">ally.get.activeElements</a>
          </li>
          
          
          <li class="">
            <a class="" href="../get/focus-redirect-target.html">ally.get.focusRedirectTarget</a>
          </li>
          
          
          <li class="">
            <a class="" href="../get/focus-target.html">ally.get.focusTarget</a>
          </li>
          
          
          <li class="">
            <a class="" href="../get/insignificant-branches.html">ally.get.insignificantBranches</a>
          </li>
          
          
          <li class="">
            <a class="" href="../get/parents.html">ally.get.parents</a>
          </li>
          
          
          <li class="">
            <a class="" href="../get/shadow-host.html">ally.get.shadowHost</a>
          </li>
          
          
          <li class="">
            <a class="" href="../get/shadow-host-parents.html">ally.get.shadowHostParents</a>
          </li>
          
          
          <li class="">
            <a class="" href="../is/active-element.html">ally.is.activeElement</a>
          </li>
          
          
          <li class="">
            <a class="" href="../is/disabled.html">ally.is.disabled</a>
          </li>
          
          
          <li class="">
            <a class="" href="../is/focusable.html">ally.is.focusable</a>
          </li>
          
          
          <li class="">
            <a class="" href="../is/focus-relevant.html">ally.is.focusRelevant</a>
          </li>
          
          
          <li class="">
            <a class="" href="../is/only-tabbable.html">ally.is.onlyTabbable</a>
          </li>
          
          
          <li class="">
            <a class="" href="../is/shadowed.html">ally.is.shadowed</a>
          </li>
          
          
          <li class="">
            <a class="" href="../is/tabbable.html">ally.is.tabbable</a>
          </li>
          
          
          <li class="">
            <a class="" href="../is/valid-area.html">ally.is.validArea</a>
          </li>
          
          
          <li class="">
            <a class="" href="../is/valid-tabindex.html">ally.is.validTabindex</a>
          </li>
          
          
          <li class="">
            <a class="" href="../is/visible.html">ally.is.visible</a>
          </li>
          
          
          <li class="">
            <a class="" href="../maintain/disabled.html">ally.maintain.disabled</a>
          </li>
          
          
          <li class="">
            <a class="" href="../maintain/hidden.html">ally.maintain.hidden</a>
          </li>
          
          
          <li class="">
            <a class="" href="../maintain/tab-focus.html">ally.maintain.tabFocus</a>
          </li>
          
          
          <li class="">
            <a class="" href="../map/attribute.html">ally.map.attribute</a>
          </li>
          
          
          <li class="">
            <a class="" href="../map/keycode.html">ally.map.keycode</a>
          </li>
          
          
          <li class="">
            <a class="" href="../observe/interaction-type.html">ally.observe.interactionType</a>
          </li>
          
          
          <li class="">
            <a class="" href="../observe/shadow-mutations.html">ally.observe.shadowMutations</a>
          </li>
          
          
          <li class="">
            <a class="" href="../query/first-tabbable.html">ally.query.firstTabbable</a>
          </li>
          
          
          <li class="">
            <a class="" href="../query/focusable.html">ally.query.focusable</a>
          </li>
          
          
          <li class="">
            <a class="" href="../query/shadow-hosts.html">ally.query.shadowHosts</a>
          </li>
          
          
          <li class="">
            <a class="" href="../query/tabbable.html">ally.query.tabbable</a>
          </li>
          
          
          <li class="">
            <a class="" href="../query/tabsequence.html">ally.query.tabsequence</a>
          </li>
          
          
          <li class="">
            <a class="" href="../style/focus-source.html">ally.style.focusSource</a>
          </li>
          
          
          <li class="">
            <a class="" href="../style/focus-within.html">ally.style.focusWithin</a>
          </li>
          
          
          <li class="active">
            <a class="" href="focusable.html">ally.when.focusable</a>
          </li>
          
          
          <li class="">
            <a class="" href="key.html">ally.when.key</a>
          </li>
          
          
          <li class="">
            <a class="" href="visible-area.html">ally.when.visibleArea</a>
          </li>
          
          
          <li class="">
            <a class="" href="../prototype.html">Prototype polyfills</a>
          </li>
          
          
          <li class="">
            <a class="" href="../selector.html">Selector</a>
          </li>
          
          
          <li class="">
            <a class="" href="../supports.html">Supports - Browser compatibility</a>
          </li>
          
          
          <li class="">
            <a class="" href="../util.html">Utilities</a>
          </li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          </ul>
        </nav>      </aside>
    </div>

    <main id="main" tabindex="-1">
      <h1 id="allywhenfocusable"><a class="link-to-headline" href="#allywhenfocusable">#</a> ally.when.focusable</h1>
<p>Executes a callback once an element fulfills <a href="../is/focusable.html"><code>ally.is.focusable</code></a> and is visible in the viewport</p>
<h2 id="description"><a class="link-to-headline" href="#description">#</a> Description</h2>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement.focus"><code>Element.focus()</code></a> scrolls the element into view if it isn&apos;t already. In situations where content is not revealed immediately, but through a transition
or animation this can be a problem if the element is focused to early.</p>
<p>The callback executes once the predicates <a href="../is/visible.html"><code>ally.is.visible</code></a>, <a href="../is/focusable.html"><code>ally.is.focusable</code></a> and <a href="../util.html#calculate-an-elements-visible-area"><code>ally/util/visible-area</code></a> return positive. Visibility detection works regardless of the technical way an element was made invisible. The predicates are evaluated on every <a href="https://developer.mozilla.org/en-US/docs/Web/API/window.requestAnimationFrame">animation frame</a>.</p>
<p>The callback function executes exactly once, meaning the callback won&apos;t execute every time the element comes into view. Waiting for the callback to execute is aborted automatically should another element have gotten focus prior to the context element coming fully into view. The callback is executed immediately if the context element is already fully visible and focusable.</p>
<p>The callback may return <code>false</code> to indicate that another predicate (handled by the callback function) has not been fulfilled yet and the callback should be executed again on the next animation frame.</p>
<h2 id="usage"><a class="link-to-headline" href="#usage">#</a> Usage</h2>
<pre><code class="language-javascript">var handle = ally.when.focusable({
  context: &apos;#element-to-focus&apos;,
  callback: function(element) {
    element.focus();
  },
});

handle.disengage();
</code></pre>
<h3 id="arguments"><a class="link-to-headline" href="#arguments">#</a> Arguments</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>context</td>
<td><a href="../concepts.html#selector"><code>&lt;selector&gt;</code></a></td>
<td><em>required</em></td>
<td>The element to observe. The first element of a collection is used.</td>
</tr>
<tr>
<td>callback</td>
<td>function</td>
<td><em>required</em></td>
<td>The callback to execute when context element is visible in viewport and focusable. See <a href="#callback-signature">Callback Signature</a> for details.</td>
</tr>
<tr>
<td>area</td>
<td>number</td>
<td><code>1</code></td>
<td>The percentage (0 - 1) of area of the context element has to be visible in the viewport.</td>
</tr>
</tbody>
</table>
<h3 id="returns"><a class="link-to-headline" href="#returns">#</a> Returns</h3>
<p>A <a href="../concepts.html#service"><code>&lt;service&gt;</code></a> interface, providing the <code>handle.disengage()</code> method to stop the service.</p>
<h3 id="throws"><a class="link-to-headline" href="#throws">#</a> Throws</h3>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError"><code>TypeError</code></a> if <code>context</code> option is not specified or not a <code>HTMLElement</code>.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError"><code>TypeError</code></a> if <code>callback</code> option is not specified or not a <code>function</code>.</li>
</ul>
<h2 id="callback-signature"><a class="link-to-headline" href="#callback-signature">#</a> Callback signature</h2>
<p>The callback is invoked with one argument, the <code>HTMLElement</code> identified by <code>context</code>. The callback can return <code>false</code> to signal that the service needs to keep observing <code>context</code>, to allow additional state verification to be performed within the callback. If nothing is returned, the service disengages after the callback finished processing.</p>
<h2 id="examples"><a class="link-to-headline" href="#examples">#</a> Examples</h2>
<section class="example">
<h3 id="allywhenfocusable-example"><a class="link-to-headline" href="#allywhenfocusable-example">#</a> ally.when.focusable Example</h3>
<div>
<a class="jsbin-embed" href="https://jsbin.com/lanekil/embed?output">ally.when.focusable Example on jsbin.com</a>
<script src="https://static.jsbin.com/js/embed.min.js?3.35.3"></script>
</div>
<p>
<a href="https://jsbin.com/lanekil/edit" target="_blank">play with <span class="visuallyhidden">ally.when.focusable Example</span> on jsbin.com</a> or <a href="focusable.example.html" target="_blank">open the document <span class="visuallyhidden">of ally.when.focusable Example</span></a></p>
</section>
<h2 id="notes"><a class="link-to-headline" href="#notes">#</a> Notes</h2>
<div data-note-type="note">
<p>This method <em>may</em> cause <a href="http://wilsonpage.co.uk/preventing-layout-thrashing/">layout thrashing</a>.</p>
</div>
<h2 id="related-resources"><a class="link-to-headline" href="#related-resources">#</a> Related resources</h2>
<ul>
<li><a href="../is/visible.html"><code>ally.is.visible</code></a> is used to identify if the element is focusable</li>
<li><a href="visible-area.html"><code>ally.when.visibleArea</code></a> is used internally to wait until element is visible in viewport, before checking if it is focusable</li>
<li><a href="../../tutorials/focusing-in-animated-ui.html">Managing focus in animated UI</a></li>
</ul>
<h2 id="contributing"><a class="link-to-headline" href="#contributing">#</a> Contributing</h2>
<ul>
<li><a href="https://github.com/medialize/ally.js/blob/master/src/when/focusable.js">module source</a></li>
<li><a href="https://github.com/medialize/ally.js/blob/master/docs/api/when/focusable.md">document source</a></li>
<li><a href="https://github.com/medialize/ally.js/blob/master/test/unit/when.focusable.test.js">unit test</a></li>
</ul>

    </main>
  </div>

  <footer>
    <p>ally.js is published under the <a href="https://opensource.org/licenses/mit-license">MIT License</a>.</p>
    <p><a href="../../legal.html">Legal</a>, <a href="https://github.com/medialize/ally.js">Github</a>, <a href="https://twitter.com/allyjs_io">@allyjs_io</a>.</p>
    <p>Created By <a href="https://twitter.com/rodneyrehm">Rodney Rehm</a>.</p>
  </footer>
  <script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js" defer></script>
  <script src="../../assets/website.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js" defer></script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-8922143-6', 'auto');
    ga('send', 'pageview');
  </script></body>
</html>
